<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Consultations - Televet Health (Vet)</title>
    <link rel="stylesheet" href="css/sidebar-layout.css">
    <link rel="stylesheet" href="css/profile-loading.css">
    <link rel="stylesheet" href="css/appointments.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lalezar" rel="stylesheet">
    <style>body{visibility:hidden}</style>
</head>
<body>
    <div class="profile-loading-overlay loading-animation" aria-hidden="true">
        <div class="loader">
            <div class="wrapper">
                <div class="catContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 733 673" class="catbody">
                        <path fill="#212121" d="M111.002 139.5C270.502 -24.5001 471.503 2.4997 621.002 139.5C770.501 276.5 768.504 627.5 621.002 649.5C473.5 671.5 246 687.5 111.002 649.5C-23.9964 611.5 -48.4982 303.5 111.002 139.5Z"/>
                        <path fill="#212121" d="M184 9L270.603 159H97.3975L184 9Z"/>
                        <path fill="#212121" d="M541 0L627.603 150H454.397L541 0Z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 158 564" class="tail">
                        <path fill="#191919" d="M5.97602 76.066C-11.1099 41.6747 12.9018 0 51.3036 0V0C71.5336 0 89.8636 12.2558 97.2565 31.0866C173.697 225.792 180.478 345.852 97.0691 536.666C89.7636 553.378 73.0672 564 54.8273 564V564C16.9427 564 -5.4224 521.149 13.0712 488.085C90.2225 350.15 87.9612 241.089 5.97602 76.066Z"/>
                    </svg>
                    <div class="text"><span class="bigzzz">Z</span><span class="zzz">Z</span></div>
                </div>
                <div class="wallContainer">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 500 126" class="wall">
                        <line stroke-width="6" stroke="#7C7C7C" x1="50" y1="3" x2="450" y2="3"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="100" y1="85" x2="400" y2="85"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="125" y1="122" x2="375" y2="122"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="0" y1="43" x2="500" y2="43"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="115.5" y1="43" x2="115.5" y2="2"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="189" y1="43" x2="189" y2="2"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="262.5" y1="43" x2="262.5" y2="2"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="336" y1="43" x2="336" y2="2"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="409.5" y1="43" x2="409.5" y2="2"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="153" y1="84" x2="153" y2="43"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="228" y1="84" x2="228" y2="43"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="303" y1="84" x2="303" y2="43"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="378" y1="84" x2="378" y2="43"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="192" y1="125" x2="192" y2="84"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="267" y1="125" x2="267" y2="84"/>
                        <line stroke-width="6" stroke="#7C7C7C" x1="342" y1="125" x2="342" y2="84"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <div class="sidebar-overlay"></div>
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="dashboard.html" class="sidebar-brand">Telehealth</a>
            <div class="sidebar-tagline">Veterinarian Portal</div>
        </div>
        <div class="user-profile">
            <a href="profile.html" class="user-profile-link">
                <div class="user-info">
                    <div class="user-avatar">
                        <img id="sidebar-avatar-img" class="user-avatar-img is-hidden" alt="Profile photo">
                        <span class="user-avatar-initials" id="sidebar-avatar">V</span>
                    </div>
                    <div class="user-text">
                        <div class="user-name" id="sidebar-name">Veterinarian</div>
                        <div class="user-email"><i class="fa fa-envelope"></i> <span id="sidebar-email">vet@example.com</span></div>
                    </div>
                </div>
            </a>
        </div>
        <nav class="sidebar-nav">
            <a href="dashboard.html" class="nav-item"><i class="fa fa-th-large"></i> Dashboard</a>
            <a href="appointments.html" class="nav-item active"><i class="fa fa-calendar"></i> Appointments</a>
            <a href="messages.html" class="nav-item"><i class="fa fa-envelope"></i> Messages</a>
            <a href="patients.html" class="nav-item"><i class="fa fa-paw"></i> Patients</a>
        </nav>
        <nav class="footer-nav">
            <a href="admin.html" class="nav-item"><i class="fa fa-users"></i> Administration</a>
        </nav>
        <div class="logout-section">
            <button id="logout-btn" class="logout-btn"><i class="fa fa-sign-out"></i> Logout</button>
        </div>
    </aside>

    <main class="main-content">
        <header class="app-top-header">
            <div class="header-left">
                <button class="mobile-menu-toggle" aria-label="Toggle Menu"><i class="fa fa-bars"></i></button>
                <span class="role-badge"><i class="fa fa-stethoscope" aria-hidden="true"></i> Veterinarian</span>
            </div>
            <div class="header-right">
                <button type="button" class="dark-mode-toggle" aria-label="Toggle dark mode"><i class="fa fa-moon-o" aria-hidden="true"></i></button>
                <button type="button" class="profile-header-btn" aria-label="Profile"><i class="fa fa-user-circle" aria-hidden="true"></i></button>
            </div>
        </header>
        <div class="page-header">
            <h1 class="page-title">Online Consultation Schedules</h1>
        </div>
        <div class="content-wrapper">
            <div class="appointments-top-row">
                <section class="appointments-section appointments-templates-section" aria-labelledby="templates-heading">
                    <div class="appointments-section-header">
                        <h2 id="templates-heading" class="appointments-section-title"><i class="fa fa-file-text-o" aria-hidden="true"></i> Online Consultation Availability</h2>
                        <p class="appointments-section-desc">Define when you're available for video consultations. Apply templates to date ranges to create bookable slots.</p>
                        <button type="button" class="appointments-create-btn" id="template-create-btn" aria-label="Create template"><i class="fa fa-plus" aria-hidden="true"></i> Create template</button>
                    </div>
                    <div id="appointments-templates-list-wrap" class="appointments-templates-wrap">
                        <div class="appointments-templates-list" id="appointments-templates-list" aria-live="polite"></div>
                        <div class="appointments-empty is-hidden" id="appointments-empty" aria-live="polite">
                            <i class="fa fa-calendar-plus-o" aria-hidden="true"></i>
                            <p>No templates yet</p>
                            <span class="appointments-empty-hint">Create a week or day template to define when you're available for online consultations.</span>
                        </div>
                    </div>
                </section>
                <div class="appointments-partition-vertical" aria-hidden="true"></div>
                <section class="appointments-section appointments-blocked-section" aria-labelledby="blocked-heading">
                    <div class="appointments-section-header">
                        <h2 id="blocked-heading" class="appointments-section-title"><i class="fa fa-ban" aria-hidden="true"></i> Blocked dates</h2>
                        <p class="appointments-section-desc">Block dates for holidays or leave. Pet owners cannot book online consultations on blocked dates.</p>
                        <button type="button" class="appointments-create-btn btn-block-dates" id="block-dates-btn" aria-label="Block dates"><i class="fa fa-ban" aria-hidden="true"></i> Block dates</button>
                    </div>
                    <div id="blocked-dates-list-wrap" class="blocked-dates-wrap">
                        <div class="blocked-dates-list" id="blocked-dates-list" aria-live="polite"></div>
                        <div class="blocked-dates-empty is-hidden" id="blocked-dates-empty" aria-live="polite">
                            <i class="fa fa-calendar-o" aria-hidden="true"></i>
                            <p>No blocked dates</p>
                            <span class="blocked-dates-empty-hint">Block dates when you're unavailable for online consultations.</span>
                        </div>
                    </div>
                </section>
            </div>
            <div class="appointments-partition-horizontal" aria-hidden="true"></div>
            <section class="appointments-schedules-section" aria-labelledby="schedules-heading">
                <div class="schedules-section-header">
                    <h2 id="schedules-heading" class="appointments-section-title"><i class="fa fa-calendar-o" aria-hidden="true"></i> Consultation Schedules</h2>
                    <div class="schedules-view-controls">
                        <div id="schedules-list-filter-row" class="schedules-filter-row">
                            <label for="schedules-filter">Date</label>
                            <select id="schedules-filter" aria-label="Filter schedules by date">
                                <option value="all">All schedules</option>
                                <option value="today">Today</option>
                                <option value="date">Specific date</option>
                            </select>
                            <div id="schedules-date-wrap" class="schedules-date-wrap is-hidden"><input type="date" id="schedules-date-picker" aria-label="Select date"></div>
                        </div>
                        <div id="schedules-grid-filter-row" class="schedules-filter-row is-hidden">
                            <label for="schedules-grid-filter">Week</label>
                            <select id="schedules-grid-filter" aria-label="Filter by week">
                                <option value="this">This week</option>
                                <option value="next">Next week</option>
                                <option value="specific">Specific week</option>
                            </select>
                            <div id="schedules-week-wrap" class="schedules-date-wrap is-hidden"><input type="date" id="schedules-week-picker" aria-label="Select week"></div>
                        </div>
                        <div class="schedules-slot-filter">
                            <button type="button" class="schedules-slot-btn active" id="schedules-slot-all" data-slot-filter="all">All</button>
                            <button type="button" class="schedules-slot-btn" id="schedules-slot-available" data-slot-filter="available">Available</button>
                            <button type="button" class="schedules-slot-btn" id="schedules-slot-booked" data-slot-filter="booked">Booked</button>
                            <button type="button" class="schedules-slot-btn" id="schedules-slot-expired" data-slot-filter="expired">Expired Slots</button>
                        </div>
                        <span class="schedules-current-advance-wrap" id="schedules-current-advance-wrap"><span id="schedules-current-advance" aria-live="polite"></span></span>
                        <div class="schedules-view-dropdown-wrap">
                            <button type="button" class="schedules-settings-btn" id="schedules-view-settings-btn" aria-label="View settings" aria-expanded="false" aria-haspopup="true"><i class="fa fa-cog" aria-hidden="true"></i></button>
                            <div id="schedules-view-dropdown" class="schedules-view-dropdown is-hidden" role="menu">
                                <button type="button" class="schedules-view-option" data-view="list" role="menuitem"><i class="fa fa-list" aria-hidden="true"></i> List</button>
                                <button type="button" class="schedules-view-option" id="schedules-view-option-grid" data-view="grid" role="menuitem"><i class="fa fa-th" aria-hidden="true"></i> Grid</button>
                                <button type="button" class="schedules-view-option" data-view="settings" role="menuitem"><i class="fa fa-clock-o" aria-hidden="true"></i> Limiting Schedule</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="schedules-view-empty" class="schedules-view-empty">
                    <i class="fa fa-calendar-o" aria-hidden="true"></i>
                    <p>No schedules to display</p>
                    <span class="schedules-view-empty-hint">Apply an availability template to a date range to create bookable online consultation slots.</span>
                </div>
                <div id="schedules-view-wrap" class="schedules-view-wrap is-hidden">
                    <div id="schedules-expired-actions" class="schedules-expired-actions is-hidden">
                        <button type="button" class="schedules-delete-expired-btn" id="schedules-delete-all-expired-btn" aria-label="Delete all expired slots"><i class="fa fa-trash-o" aria-hidden="true"></i> Delete All</button>
                    </div>
                    <div id="schedules-list" class="schedules-list"></div>
                </div>
                <div id="weekly-schedule-empty" class="weekly-schedule-empty is-hidden">
                    <i class="fa fa-calendar-o" aria-hidden="true"></i>
                    <p id="weekly-schedule-empty-msg">No schedules this week</p>
                    <span class="weekly-schedule-week-label" id="weekly-schedule-week-label"></span>
                </div>
                <div id="weekly-schedule-grid-wrap" class="weekly-schedule-grid-wrap is-hidden">
                    <div id="weekly-schedule-week-info" class="weekly-schedule-week-info" aria-live="polite"><span id="weekly-schedule-week-display">—</span></div>
                    <div id="weekly-schedule-grid" class="weekly-schedule-grid" role="grid" aria-label="Weekly schedule"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- Template action modal -->
    <div class="template-modal-overlay is-hidden" id="template-action-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="template-action-modal" role="dialog" aria-labelledby="template-action-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="template-action-title">Template actions</h2>
                <button type="button" class="template-modal-close" id="template-action-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <div class="template-action-info">
                    <div class="appointments-template-icon"><i class="fa fa-calendar" aria-hidden="true"></i></div>
                    <div>
                        <div class="appointments-template-name" id="template-action-name">—</div>
                        <div class="appointments-template-meta" id="template-action-meta">—</div>
                    </div>
                </div>
                <p class="template-panel-hint">Choose what you want to do with this template.</p>
            </div>
            <div class="template-modal-footer template-action-footer">
                <button type="button" class="appointments-template-btn btn-apply" id="template-action-apply" aria-label="Apply"><i class="fa fa-calendar-check-o" aria-hidden="true"></i> Apply</button>
                <button type="button" class="appointments-template-btn btn-view" id="template-action-view" aria-label="View"><i class="fa fa-eye" aria-hidden="true"></i> View</button>
                <button type="button" class="appointments-template-btn btn-edit" id="template-action-edit" aria-label="Edit"><i class="fa fa-pencil" aria-hidden="true"></i> Edit</button>
                <button type="button" class="appointments-template-btn btn-delete" id="template-action-delete" aria-label="Delete"><i class="fa fa-trash-o" aria-hidden="true"></i> Delete</button>
            </div>
        </div>
    </div>

    <!-- Template view modal -->
    <div class="template-view-overlay is-hidden" id="template-view-overlay" aria-hidden="true"></div>
    <div class="template-view-modal is-hidden" id="template-view-modal" role="dialog" aria-labelledby="template-view-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="template-view-title">Template</h2>
                <button type="button" class="template-modal-close" id="template-view-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <p class="template-view-type" id="template-view-type"></p>
                <div class="template-view-schedule" id="template-view-schedule"></div>
            </div>
            <div class="template-modal-footer"><button type="button" class="btn-cancel" id="template-view-close-btn">Close</button></div>
        </div>
    </div>

    <!-- Template create/edit modal -->
    <div class="template-modal-overlay is-hidden" id="template-modal-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="template-modal" role="dialog" aria-labelledby="template-modal-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="template-modal-title">Create availability template</h2>
                <button type="button" class="template-modal-close" id="template-modal-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <div class="template-form-row">
                    <div class="template-form-group">
                        <label for="template-name">Template name</label>
                        <input type="text" id="template-name" placeholder="e.g. Regular Shift" maxlength="80" autocomplete="off">
                    </div>
                    <div class="template-form-group">
                        <label>Type</label>
                        <div class="template-type-options">
                            <label class="template-type-option" id="template-type-week-wrap"><input type="radio" name="template-type" value="week" id="template-type-week" checked> Week template</label>
                            <label class="template-type-option" id="template-type-day-wrap"><input type="radio" name="template-type" value="day" id="template-type-day"> Day template</label>
                        </div>
                    </div>
                </div>
                <div id="template-week-section" class="template-week-layout">
                    <div class="template-days-panel">
                        <h3>Days of the week</h3>
                        <div id="template-days-list"></div>
                    </div>
                    <div class="template-availability-panel">
                        <p class="template-panel-hint">Add consultation time slots for the selected day.</p>
                        <div class="template-copy-row template-copy-unified">
                            <div class="template-copy-radio-wrap">
                                <label class="template-copy-radio"><input type="radio" name="template-copy-source" value="day" checked> Day</label>
                                <label class="template-copy-radio"><input type="radio" name="template-copy-source" value="template"> Template</label>
                            </div>
                            <div class="dropdown vet-template-copy-dropdown" id="template-copy-source-dropdown">
                                <button type="button" class="vet-template-copy-trigger dropdown-trigger" id="template-copy-source-trigger" aria-expanded="false" aria-haspopup="true" aria-label="Copy from">
                                    <i class="fa fa-exchange vet-template-copy-trigger-icon" aria-hidden="true"></i>
                                    <span class="vet-template-copy-trigger-text">Copy from</span>
                                    <i class="fa fa-chevron-down dropdown-caret" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu vet-template-copy-menu" role="menu" id="template-copy-source-menu"></div>
                            </div>
                            <input type="hidden" id="template-copy-source-select" value="">
                            <button type="button" class="template-copy-btn" id="template-copy-week-btn"><i class="fa fa-copy" aria-hidden="true"></i> Copy</button>
                        </div>
                        <button type="button" class="template-add-slot-btn" id="template-add-slot-btn"><i class="fa fa-plus" aria-hidden="true"></i> Add time slot</button>
                        <div class="template-slots-header template-slot-row">
                            <div class="template-slot-time-wrap"><span>Start</span></div>
                            <div class="template-slot-time-wrap"><span>End</span></div>
                            <span class="template-slot-col-delete" aria-hidden="true"></span>
                        </div>
                        <div class="template-slots-list" id="template-slots-list"></div>
                    </div>
                </div>
                <div id="template-day-section" class="template-day-layout is-hidden">
                    <div class="template-availability-panel">
                        <p class="template-panel-hint">Add consultation time slots for this template.</p>
                        <div class="template-copy-row">
                            <label for="template-copy-from-trigger">Copy from template</label>
                            <div class="dropdown vet-template-copy-dropdown" id="template-copy-from-dropdown">
                                <button type="button" class="vet-template-copy-trigger dropdown-trigger" id="template-copy-from-trigger" aria-expanded="false" aria-haspopup="true" aria-label="Copy from day template">
                                    <i class="fa fa-exchange vet-template-copy-trigger-icon" aria-hidden="true"></i>
                                    <span class="vet-template-copy-trigger-text">Copy from</span>
                                    <i class="fa fa-chevron-down dropdown-caret" aria-hidden="true"></i>
                                </button>
                                <div class="dropdown-menu vet-template-copy-menu" role="menu" id="template-copy-from-menu"></div>
                            </div>
                            <input type="hidden" id="template-copy-from-template" value="">
                            <button type="button" class="template-copy-btn" id="template-copy-from-template-btn"><i class="fa fa-copy" aria-hidden="true"></i> Copy</button>
                        </div>
                        <button type="button" class="template-add-slot-btn" id="template-day-add-slot-btn"><i class="fa fa-plus" aria-hidden="true"></i> Add time slot</button>
                        <div class="template-slots-header template-slot-row">
                            <div class="template-slot-time-wrap"><span>Start</span></div>
                            <div class="template-slot-time-wrap"><span>End</span></div>
                            <span class="template-slot-col-delete" aria-hidden="true"></span>
                        </div>
                        <div class="template-slots-list" id="template-day-slots-list"></div>
                    </div>
                </div>
                <p class="template-error-msg is-hidden" id="template-error-msg" role="alert"></p>
            </div>
            <div class="template-modal-footer"><button type="button" class="btn-cancel" id="template-cancel-btn">Cancel</button><button type="button" class="btn-save" id="template-save-btn">Save template</button></div>
        </div>
    </div>

    <!-- Conflict modal -->
    <div class="template-modal-overlay is-hidden" id="conflict-modal-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="conflict-modal" role="dialog" aria-labelledby="conflict-modal-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="conflict-modal-title"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Schedule conflict</h2>
                <button type="button" class="template-modal-close" id="conflict-modal-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <p class="conflict-modal-message" id="conflict-modal-message">Some template time slots conflict with existing slots on the selected date(s). The conflicting slots are empty (no appointments booked).</p>
                <p class="conflict-modal-choices">Choose how to proceed:</p>
                <div class="conflict-modal-actions">
                    <button type="button" class="btn-save" id="conflict-replace-btn"><i class="fa fa-refresh" aria-hidden="true"></i> Replace entire day schedule</button>
                    <button type="button" class="btn-cancel" id="conflict-cancel-btn"><i class="fa fa-times" aria-hidden="true"></i> Cancel and keep current schedule</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit day modal -->
    <div class="template-modal-overlay is-hidden" id="edit-day-modal-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="edit-day-modal" role="dialog" aria-labelledby="edit-day-modal-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="edit-day-modal-title"><i class="fa fa-pencil" aria-hidden="true"></i> Edit schedule</h2>
                <button type="button" class="template-modal-close" id="edit-day-modal-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <p class="edit-day-date-display" id="edit-day-date-display"></p>
                <p class="template-panel-hint">Add, remove, or change time slots for this date only. Changes do not affect templates or other dates.</p>
                <button type="button" class="template-add-slot-btn" id="edit-day-add-slot-btn"><i class="fa fa-plus" aria-hidden="true"></i> Add time slot</button>
                <div class="template-slots-header template-slot-row template-slots-header-edit-day">
                    <span class="template-slot-status-icon" aria-hidden="true"></span>
                    <div class="template-slot-time-wrap"><span>Start</span></div>
                    <div class="template-slot-time-wrap"><span>End</span></div>
                    <span class="template-slot-col-delete" aria-hidden="true"></span>
                </div>
                <div class="template-slots-list" id="edit-day-slots-list"></div>
                <p class="template-error-msg is-hidden" id="edit-day-error-msg" role="alert"></p>
            </div>
            <div class="template-modal-footer"><button type="button" class="btn-cancel" id="edit-day-cancel-btn">Cancel</button><button type="button" class="btn-save" id="edit-day-save-btn">Save changes</button></div>
        </div>
    </div>

    <!-- Block dates modal -->
    <div class="template-modal-overlay is-hidden" id="block-modal-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="block-modal" role="dialog" aria-labelledby="block-modal-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="block-modal-title"><i class="fa fa-ban" aria-hidden="true"></i> Block dates (holidays)</h2>
                <button type="button" class="template-modal-close" id="block-modal-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <p class="template-panel-hint">Click dates on the calendar to block or unblock them. Blocked dates prevent pet owners from booking online consultations on those days.</p>
                <div class="block-calendar-wrap">
                    <div class="block-calendar-header">
                        <button type="button" class="block-calendar-nav" id="block-calendar-prev" aria-label="Previous month"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>
                        <h3 class="block-calendar-month-year" id="block-calendar-month-year" aria-live="polite">—</h3>
                        <button type="button" class="block-calendar-nav" id="block-calendar-next" aria-label="Next month"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
                    </div>
                    <div class="block-calendar-weekdays" aria-hidden="true"><span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span></div>
                    <div class="block-calendar-grid" id="block-calendar-grid" role="grid" aria-label="Block dates calendar"></div>
                </div>
                <p class="template-error-msg is-hidden" id="block-error-msg" role="alert"></p>
            </div>
            <div class="template-modal-footer"><button type="button" class="btn-cancel" id="block-cancel-btn">Cancel</button><button type="button" class="btn-save" id="block-submit-btn">Save blocked dates</button></div>
        </div>
    </div>

    <!-- Apply template modal -->
    <div class="template-modal-overlay is-hidden" id="apply-modal-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="apply-modal" role="dialog" aria-labelledby="apply-modal-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="apply-modal-title">Apply template to date range</h2>
                <button type="button" class="template-modal-close" id="apply-modal-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <p class="apply-template-name-wrap">Template: <strong id="apply-template-name">—</strong></p>
                <p class="template-panel-hint">Select a date range (start date must be today or later). Online consultation slots are created for future dates only. Slots within the minimum advance window are skipped. Blocked dates are skipped.</p>
                <div class="template-form-row">
                    <div class="template-form-group">
                        <label for="apply-start-date">Start date</label>
                        <div class="date-input-wrapper"><input type="date" id="apply-start-date" aria-label="Start date"><i class="fa fa-calendar date-input-icon" aria-hidden="true"></i></div>
                    </div>
                    <div class="template-form-group">
                        <label for="apply-end-date">End date</label>
                        <div class="date-input-wrapper"><input type="date" id="apply-end-date" aria-label="End date"><i class="fa fa-calendar date-input-icon" aria-hidden="true"></i></div>
                    </div>
                </div>
                <p class="template-error-msg is-hidden" id="apply-error-msg" role="alert"></p>
            </div>
            <div class="template-modal-footer"><button type="button" class="btn-cancel" id="apply-cancel-btn">Cancel</button><button type="button" class="btn-save" id="apply-submit-btn">Apply</button></div>
        </div>
    </div>

    <!-- Limiting Schedule (advance booking limit) modal -->
    <div class="template-modal-overlay is-hidden" id="booking-settings-overlay" aria-hidden="true"></div>
    <div class="template-modal is-hidden" id="booking-settings-modal" role="dialog" aria-labelledby="booking-settings-title" aria-modal="true">
        <div class="template-modal-card">
            <div class="template-modal-header">
                <h2 class="template-modal-title" id="booking-settings-title"><i class="fa fa-clock-o" aria-hidden="true"></i> Limiting Schedule</h2>
                <button type="button" class="template-modal-close" id="booking-settings-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="template-modal-body">
                <p class="limiting-schedule-caution" role="alert">
                    <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                    This setting controls how far in advance pet owners can book online consultations. Bookings must be made at least this amount of time before the consultation start.
                </p>
                <div class="template-form-row">
                    <div class="template-form-group">
                        <label for="min-advance-value">Booking limit (minimum advance)</label>
                        <div class="min-advance-input-row">
                            <input type="number" id="min-advance-value" min="1" step="1" placeholder="e.g. 30" aria-label="Value" autocomplete="off">
                            <select id="min-advance-unit" aria-label="Unit">
                                <option value="minutes">Minutes</option>
                                <option value="hours">Hours</option>
                            </select>
                        </div>
                        <span class="template-panel-hint">Example: 2 hours = pet owners must book at least 2 hours before the consultation time.</span>
                    </div>
                </div>
                <p class="template-error-msg is-hidden" id="booking-settings-error" role="alert"></p>
            </div>
            <div class="template-modal-footer">
                <button type="button" class="btn-cancel" id="booking-settings-cancel-btn">Cancel</button>
                <button type="button" class="btn-save" id="booking-settings-save-btn">Save</button>
            </div>
        </div>
    </div>

    <!-- Appointment details modal (same format as pet owner, Owner instead of Vet) -->
    <div class="details-modal-overlay" id="details-modal-overlay" aria-hidden="true">
        <div class="details-modal" id="details-modal" role="dialog" aria-labelledby="details-modal-title" aria-modal="true" tabindex="-1">
            <div class="details-modal-header">
                <h2 class="details-modal-title" id="details-modal-title"><i class="fa fa-calendar" aria-hidden="true"></i> Appointment Details</h2>
                <button type="button" class="details-modal-close" id="details-modal-close" aria-label="Close"><i class="fa fa-times" aria-hidden="true"></i></button>
            </div>
            <div class="details-modal-body">
                <h3 class="details-title-block" id="details-title">—</h3>
                <h4 class="details-section-header"><i class="fa fa-user" aria-hidden="true"></i> Pet Owner</h4>
                <div class="details-doctor-section details-owner-section">
                    <div class="details-doctor-avatar-wrap">
                        <img class="details-doctor-avatar-img" id="details-owner-img" src="" alt="" onerror="this.style.display='none';this.nextElementSibling.classList.add('visible')">
                        <span class="details-doctor-avatar-fallback" id="details-owner-avatar-fallback" aria-hidden="true"><i class="fa fa-user" aria-hidden="true"></i></span>
                    </div>
                    <p class="details-doctor-name" id="details-owner-name">—</p>
                </div>
                <hr class="details-separator" aria-hidden="true">
                <h4 class="details-section-header"><i class="fa fa-paw" aria-hidden="true"></i> Pet Info</h4>
                <div class="details-pet-card">
                    <div class="details-pet-avatar-wrap" id="details-pet-avatar-wrap">
                        <img class="details-pet-avatar-img" id="details-pet-img" src="" alt="" onerror="this.style.display='none';this.nextElementSibling.classList.add('visible')">
                        <span class="details-pet-avatar-fallback" id="details-pet-avatar-fallback" aria-hidden="true"><i class="fa fa-paw" aria-hidden="true"></i></span>
                    </div>
                    <div class="details-pet-info">
                        <h3 class="details-pet-name" id="details-pet-name">—</h3>
                        <div class="details-pet-meta">
                            <span class="details-pet-meta-item"><i class="fa fa-birthday-cake" aria-hidden="true"></i> <span id="details-pet-age">—</span></span>
                            <span class="details-pet-meta-item"><i class="fa fa-balance-scale" aria-hidden="true"></i> <span id="details-pet-weight">—</span></span>
                            <span class="details-pet-meta-item"><i class="fa fa-paw" aria-hidden="true"></i> <span id="details-pet-species">—</span></span>
                        </div>
                    </div>
                </div>
                <hr class="details-separator" aria-hidden="true">
                <div class="details-card details-card--appointment">
                    <h3 class="details-card-title">Appointment Info</h3>
                    <div class="details-appointment-row">
                        <span class="details-appointment-label"><i class="fa fa-calendar" aria-hidden="true"></i> Date</span>
                        <span class="details-appointment-value" id="details-date">—</span>
                    </div>
                    <div class="details-appointment-row">
                        <span class="details-appointment-label"><i class="fa fa-clock-o" aria-hidden="true"></i> Time</span>
                        <span class="details-appointment-value" id="details-time">—</span>
                    </div>
                    <div class="details-appointment-row details-appointment-row--concern">
                        <span class="details-appointment-label"><i class="fa fa-comment-o" aria-hidden="true"></i> Concern</span>
                        <span class="details-appointment-value details-appointment-value--concern" id="details-concern">—</span>
                    </div>
                    <div class="details-appointment-row details-appointment-row--id">
                        <span class="details-appointment-label"><i class="fa fa-id-badge" aria-hidden="true"></i> Appointment ID:</span>
                        <span class="details-appointment-value details-appointment-value--id" id="details-appointment-id">—</span>
                    </div>
                </div>
                <div class="details-shared-images">
                    <h3 class="details-shared-images-title"><i class="fa fa-picture-o" aria-hidden="true"></i> Shared Images</h3>
                    <div class="details-shared-images-placeholder" id="details-shared-images-placeholder">
                        <i class="fa fa-image details-shared-images-icon" aria-hidden="true"></i>
                        <p class="details-shared-images-text">No images shared yet</p>
                        <p class="details-shared-images-hint">Photos or documents from this consultation will appear here.</p>
                    </div>
                </div>
            </div>
            <div class="details-modal-footer">
                <button type="button" class="details-join-btn" id="details-join-btn"><i class="fa fa-video-camera" aria-hidden="true"></i> Join Video Call</button>
            </div>
        </div>
    </div>

    <script src="js/sidebar.js"></script>
    <script type="module" src="js/dashboard-auth.js"></script>
    <script type="module" src="js/profile.js"></script>
    <script type="module" src="js/appointments.js"></script>
</body>
</html>
